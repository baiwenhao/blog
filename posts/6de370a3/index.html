<!DOCTYPE html>
          <head>
        <meta charset="utf-8">
            
            <title>
                fabric | wenhao blog
            </title>
            <meta content="width=device-width, initial-scale=1" name="viewport">
            <meta name="theme-color" content="#4184f3">
            
            
            <link href="/favicon.ico" rel="icon"/>
            

            <link rel="stylesheet" href="/css/highlight.light.css">
            <link rel="stylesheet" href="/css/prism-customize.css">
            <link rel="stylesheet" href="/css/nav-icon.css">
            <link rel="stylesheet" href="/css/waves.min.css">
            <link rel="stylesheet" href="/css/jquery.tocify.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/nav-indicator.css">
            
  

  
            </meta>
        </meta>
    <link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

    <body>
        <header>
            <!-- cover image or sth. -->
        </header>
        <div id="main" class="m-scene">
            
<div class="nav-wrapper">

    <div class="container">
        <nav>
            <div class="logo wave">
                <a href="/" id="logo">
                    wenhao blog
                </a>
            </div>
            <div class="nav-toggle-icon" >
                <div class="material-hamburger">
                    <span>
                    </span>
                    <span>
                    </span>
                    <span>
                    </span>
                </div>
            </div>
            <div class="menu-wrapper">
                <div class="nav-indicator">
                </div>
                <ul class="menus">
                    
                     
                        <li>
                            <a class="wave " href="/">
                                首页
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/archives">
                                归档
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/about">
                                关于
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave no-smoothstate" href="/atom.xml">
                                订阅
                            </a>
                        </li>
                     
                    
                   
                </ul>
            </div>
        </nav>
    </div>
</div>
            <div class="container content">
                <div class="scene_element scene_element--fadein">
                    <div class="row">
    <div class="main">
        <article>
          
          <header class="post-header">
          
          </header>
          <h1 class="post-title">fabric</h1>

          <section class="post-info">
            <span class="post-date">2017/12/24</span>
            
            
          </section>

          <section class="post-content">
            <h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>允许您 canvas 使用JavaScript 轻松创建诸如矩形，圆形，三角形等多边形或由多条路径组成的更复杂形状的简单形状到网页的HTML 元素上。<br>Fabric.js将允许您用鼠标操作这些对象的大小，位置和旋转。还可以更改这些对象的某些属性，例如网页的颜色，透明度，深度位置或使用Fabric.js库选择这些对象的组。<br>Fabric.js也将允许你将一个SVG图像转换成JavaScript数据，用于将其放到 canvas 元素上</p>
<h3 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h3><p>用到构造函数 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader" target="_blank">FileReader</a> 读取input选择图片后返回的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileList" target="_blank" rel="noopener">FileList</a> 对象</p>
<h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绘制方形</span></span><br><span class="line"><span class="keyword">var</span> rect = <span class="keyword">new</span> fabric.Rect(&#123;</span><br><span class="line">  left: <span class="number">100</span>,</span><br><span class="line">  top: <span class="number">100</span>,</span><br><span class="line">  fill: <span class="string">'red'</span>,</span><br><span class="line">  width: <span class="number">30</span>,</span><br><span class="line">  height: <span class="number">30</span>,</span><br><span class="line">  selectable: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">rect.setLeft(rect.getLeft() + <span class="number">10</span>)</span><br><span class="line">canvas.renderAll()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制圆形</span></span><br><span class="line"><span class="keyword">var</span> circle = <span class="keyword">new</span> fabric.Circle(&#123;</span><br><span class="line">  radius: <span class="number">50</span>,</span><br><span class="line">  fill: <span class="string">'green'</span>,</span><br><span class="line">  left: <span class="number">200</span>,</span><br><span class="line">  top: <span class="number">200</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制三角形</span></span><br><span class="line"><span class="keyword">var</span> triangle = <span class="keyword">new</span> fabric.Triangle(&#123;</span><br><span class="line">    width: <span class="number">80</span>,</span><br><span class="line">    height: <span class="number">100</span>,</span><br><span class="line">    fill: <span class="string">'blue'</span>,</span><br><span class="line">    left: <span class="number">50</span>,</span><br><span class="line">    top: <span class="number">50</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制不规则图形：</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="keyword">new</span> fabric.Path(<span class="string">'M 0 0 L 200 100 L 170 200 z'</span>)</span><br><span class="line">path.set(&#123; <span class="attr">left</span>: <span class="number">120</span>, <span class="attr">top</span>: <span class="number">120</span>,<span class="attr">fill</span>:<span class="string">'red'</span> &#125;)</span><br><span class="line">canvas.add(path)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">上边的代码需要注意的是第二行， fabric.Path( )方法里边跟了一串字符串参数.</span></span><br><span class="line"><span class="comment">“M”代表“移动”命令，这个“M 00” 代表把画笔移动到（0,0）点坐标。</span></span><br><span class="line"><span class="comment">“L”代表“线”，“L 200 100 ”的意思是使用钢笔画一条线，从（0,0）坐标画到（200,100）坐标。</span></span><br><span class="line"><span class="comment">“z” 代表让图形闭合路径。就这样我们轻松的画出了一个三角形。</span></span><br><span class="line"><span class="comment">画好三角形后，我们可以用set( )方法对三角形的位置、颜色、角度、透明度等属性进行设置。</span></span><br><span class="line"><span class="comment">虽然用路径画图形很简单，但图形比较复杂时，你会发现这很难控制，</span></span><br><span class="line"><span class="comment">代码会变的臃肿而不可阅读，在实际工作中没有这样使用的。</span></span><br><span class="line"><span class="comment">我们可以用svg来代替这种路径的形式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加文字</span></span><br><span class="line"><span class="keyword">var</span> text = <span class="keyword">new</span> fabric.Text(<span class="string">'hello world'</span>, &#123;</span><br><span class="line">  fontSize: <span class="number">30</span>,</span><br><span class="line">  originX: <span class="string">'center'</span>,</span><br><span class="line">  originY: <span class="string">'center'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加组</span></span><br><span class="line"><span class="keyword">var</span> group = <span class="keyword">new</span> fabric.Group([ circle, text ], &#123;</span><br><span class="line">  left: <span class="number">150</span>,</span><br><span class="line">  top: <span class="number">100</span>,</span><br><span class="line">  angle: <span class="number">-10</span></span><br><span class="line">&#125;)</span><br><span class="line">group.item(<span class="number">0</span>).setFill(<span class="string">'red'</span>)</span><br><span class="line">group.item(<span class="number">1</span>).set(&#123;</span><br><span class="line">  text: <span class="string">'trololo'</span>,</span><br><span class="line">  fill: <span class="string">'white'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加图片</span></span><br><span class="line"><span class="keyword">var</span> imgElement = <span class="built_in">document</span>.getElementById(<span class="string">'img'</span>)</span><br><span class="line"><span class="keyword">var</span> imgInstance = <span class="keyword">new</span> fabric.Image(imgElement, &#123;</span><br><span class="line">  left: <span class="number">100</span>,</span><br><span class="line">  top: <span class="number">100</span>,</span><br><span class="line">  width: <span class="number">200</span>,</span><br><span class="line">  height: <span class="number">100</span>,</span><br><span class="line">  angle: <span class="number">30</span> <span class="comment">// 设置旋转</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">canvas.add(imgInstance)</span><br><span class="line"></span><br><span class="line"><span class="comment">// js中插入图片</span></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="keyword">new</span> fabric.Canvas(<span class="string">'canvas'</span>)</span><br><span class="line">fabric.Image.fromURL(<span class="string">'./2.png'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">oImg</span>) </span>&#123;</span><br><span class="line">  oImg.scale(<span class="number">0.1</span>) <span class="comment">// 图片缩小10倍</span></span><br><span class="line">  oImg.setWidth(<span class="number">200</span>)</span><br><span class="line">  canvas.add(oImg)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动画</span></span><br><span class="line">rect.set(<span class="string">'angle'</span>, <span class="number">45</span>)</span><br><span class="line">rect.animate(<span class="string">'angle'</span>, <span class="string">'+=45'</span>, &#123;</span><br><span class="line">  duration: <span class="number">4000</span>,</span><br><span class="line">  easing: fabric.util.ease.easeOutBounce,</span><br><span class="line">  onChange: canvas.renderAll.bind(canvas)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;a href=<span class="string">"http://fabricjs.com/docs/fabric.util.ease.html"</span>&gt;doc文档&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 添加过滤器</span></span><br><span class="line"><span class="regexp">var canvas = new fabric.Canvas('canvas');</span></span><br><span class="line"><span class="regexp">fabric.Image.fromURL('2.jpg', function (img) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 添加过滤器</span></span><br><span class="line"><span class="regexp">  img.filters.push(new fabric.Image.filters.Grayscale())</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 应用过滤器并重新渲染画布执行</span></span><br><span class="line"><span class="regexp">  img.applyFilters(canvas.renderAll.bind(canvas))</span></span><br><span class="line"><span class="regexp">  canvas.add(img)</span></span><br><span class="line"><span class="regexp">  img.on('selected', () =&gt; &#123; /</span><span class="regexp">/ mouse:down | scaling | modified</span></span><br><span class="line"><span class="regexp">    console.log('选中')</span></span><br><span class="line"><span class="regexp">  &#125;)</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 设置选中项</span></span><br><span class="line"><span class="regexp">canvas.setActiveObject(canvasimg)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 设置可见</span></span><br><span class="line"><span class="regexp"> line2.set(&#123; visible: true &#125;)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 设置图层</span></span><br><span class="line"><span class="regexp">FlowChar.sendToBack = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  var activeObject = this.canvas.getActiveObject();</span></span><br><span class="line"><span class="regexp">  if (activeObject) &#123;</span></span><br><span class="line"><span class="regexp">    canvas.sendToBack(activeObject);</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// this.canvas.setActiveObject(text)</span></span><br><span class="line"><span class="comment">// text.selectAll()</span></span><br><span class="line"><span class="comment">// text.enterEditing()</span></span><br><span class="line"><span class="comment">// text.hiddenTextarea.focus() // 无法失去焦点</span></span><br></pre></td></tr></table></figure>
<h3 id="Reference-address"><a href="#Reference-address" class="headerlink" title="Reference address"></a>Reference address</h3><p><a href="http://fabricjs.com/" target="_blank">demo</a><br><a href="http://fabricjs.com/benchmarks/" target="_blank">benchmarks</a><br><a href="https://github.com/kangax/fabric.js" target="_blank">github</a></p>
<h3 id="cdn"><a href="#cdn" class="headerlink" title="cdn"></a>cdn</h3><p><a href="https://cdnjs.com/libraries/fabric.js/2.0.1" target="_blank" rel="noopener">https://cdnjs.com/libraries/fabric.js/2.0.1</a></p>
<h3 id="双击事件"><a href="#双击事件" class="headerlink" title="双击事件"></a>双击事件</h3><p><a href="https://stackoverflow.com/questions/23418055/fabricjs-double-click-on-objects" target="_blank" rel="noopener">https://stackoverflow.com/questions/23418055/fabricjs-double-click-on-objects</a></p>
<h3 id="自动换行"><a href="#自动换行" class="headerlink" title="自动换行"></a>自动换行</h3><p><a href="http://jsfiddle.net/maxenko/nyw5myq5/4/" target="_blank" rel="noopener">http://jsfiddle.net/maxenko/nyw5myq5/4/</a></p>
<p>canvas教程<br><a href="https://mobiforge.com/design-development/html5-mobile-web-canvas" target="_blank" rel="noopener">https://mobiforge.com/design-development/html5-mobile-web-canvas</a></p>
<p>感谢这个问题<br><a href="https://stackoverflow.com/questions/47010467/fit-the-background-image-to-canvas-size-with-fabric-js" target="_blank" rel="noopener">https://stackoverflow.com/questions/47010467/fit-the-background-image-to-canvas-size-with-fabric-js</a></p>
<p>活动区域动画不错<br><a href="https://www.zazzle.com/coach_gifts_basketball_your_colors_8_text_boxes-256691781630798133" target="_blank" rel="noopener">https://www.zazzle.com/coach_gifts_basketball_your_colors_8_text_boxes-256691781630798133</a></p>
<p>参考：<br><a href="http://blog.csdn.net/dananhai381/article/details/14169665" target="_blank" rel="noopener">http://blog.csdn.net/dananhai381/article/details/14169665</a><br><a href="https://www.npmjs.com/package/font-carrier" target="_blank" rel="noopener">https://www.npmjs.com/package/font-carrier</a><br><a href="http://blog.csdn.net/u014032819/article/details/77864682" target="_blank" rel="noopener">http://blog.csdn.net/u014032819/article/details/77864682</a><br><a href="http://blog.csdn.net/yanzisu_congcong/article/details/77840526" target="_blank" rel="noopener">http://blog.csdn.net/yanzisu_congcong/article/details/77840526</a><br><a href="https://www.cnblogs.com/vipstone/p/8716419.html" target="_blank" rel="noopener">https://www.cnblogs.com/vipstone/p/8716419.html</a></p>
<p>fabric.js介绍<br>fabric.js是什么<br>fabric.js是可以简化canvas编写的js库，提供canvas缺少的对象模型，包含动画、数据序列号和反序列化的等高级功能的js库，开源项目，在GitHub有很多人贡献。</p>
<p>fabric.js优缺点<br>优点：fabric提供超好的画布能力.<br>缺点：api超级烂，没有相应的demo代码，上手难度较大.</p>
<p>fabric.js使用笔记<br>对象</p>
<p>fabric.Circle 圆<br>fabric.Ellipse  椭圆<br>fabric.Line 直线<br>fabric.Polygon<br>fabric.Polyline<br>fabric.Rect 矩形<br>fabric.Triangle 三角形</p>
<p>方法<br>add(object) 添加<br>insertAt(object,index) 添加<br>remove(object) 移除<br>forEachObject 循环遍历<br>getObjects() 获取所有对象<br>item(int) 获取子项<br>isEmpty() 判断是否空画板<br>size() 画板元素个数<br>contains(object) 查询是否包含某个元素<br>fabric.util.cos<br>fabric.util.sin<br>fabric.util.drawDashedLine 绘制虚线<br>getWidth() setWidth()<br>getHeight()<br>clear() 清空<br>renderAll() 重绘<br>requestRenderAll() 请求重新渲染<br>rendercanvas() 重绘画板<br>getCenter().top/left 获取中心坐标<br>toDatalessJSON() 画板信息序列化成最小的json<br>toJSON() 画板信息序列化成json<br>moveTo(object,index) 移动<br>dispose() 释放<br>setCursor() 设置手势图标<br>getSelectionContext()获取选中的context<br>getSelectionElement()获取选中的元素<br>getActiveObject() 获取选中的对象<br>getActiveObjects() 获取选中的多个对象<br>discardActiveObject()取消当前选中对象<br>isType() 图片的类型<br>setColor(color) = canvas.set(“full”,””);<br>rotate() 设置旋转角度<br>setCoords() 设置坐标</p>
<p>事件<br>object:added<br>object:removed<br>object:modified<br>object:rotating<br>object:scaling<br>object:moving<br>object:selected 这个方法v2已经废弃，使用selection:created替代，多选不会触发<br>before:selection:cleared<br>selection:cleared<br>selection:updated<br>selection:created<br>path:created<br>mouse:down<br>mouse:move<br>mouse:up<br>mouse:over<br>mouse:out<br>mouse:dblclick</p>
<p>常用属性<br>canvas.isDrawingMode = true; 可以自由绘制<br>canvas.selectable = false; 控件不能被选择，不会被操作<br>canvas.selection = true; 画板显示选中<br>canvas.skipTargetFind = true; 整个画板元素不能被选中<br>canvas.freeDrawingBrush.color = “#E34F51” 设置自由绘画笔的颜色<br>freeDrawingBrush.width 自由绘笔触宽度</p>
<p>IText的方法<br>selectAll() 选择全部<br>getSelectedText() 获取选中的文本<br>exitEditing() 退出编辑模式</p>

          </section>
        </article>
        

       
        <div class="pager">
          
            <a class="post-prev pager-item" href="/posts/1879f8e5/" >
              <strong class="article-nav-caption">上一篇</strong>
              <p class="post-nav-title">html</p>
            </a>
          
          
            <a class="post-next pager-item" href="/posts/ec86cd8e/">
              <strong class="article-nav-caption">下一篇</strong>
              <p class="post-nav-title">socker</p>
            </a>
          
        </div>
        

         <!-- comments -->
        <div class="comment-section">
  
    


  


</div>

    </div>
    
</div>

                </div>
            </div>
        </div>
        <footer class="footer">
    <p>
        &copy; 2021 wenhao blog
    </p>
</footer>
<script src="/lib/jquery.js"></script>
<script src="/lib/waves.js"></script>
<script src="/lib/jquery-ui.js"></script>
<script src="/lib/jquery.tocify.js"></script>
<script src="/js/main.js"></script>

    </body>
</html>

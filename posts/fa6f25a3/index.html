<!DOCTYPE html>
          <head>
        <meta charset="utf-8">
            
            <title>
                event | wenhao blog
            </title>
            <meta content="width=device-width, initial-scale=1" name="viewport">
            <meta name="theme-color" content="#4184f3">
            
            
            <link href="/favicon.ico" rel="icon"/>
            

            <link rel="stylesheet" href="/css/highlight.light.css">
            <link rel="stylesheet" href="/css/prism-customize.css">
            <link rel="stylesheet" href="/css/nav-icon.css">
            <link rel="stylesheet" href="/css/waves.min.css">
            <link rel="stylesheet" href="/css/jquery.tocify.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/nav-indicator.css">
            
  

  
            </meta>
        </meta>
    <link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

    <body>
        <header>
            <!-- cover image or sth. -->
        </header>
        <div id="main" class="m-scene">
            
<div class="nav-wrapper">

    <div class="container">
        <nav>
            <div class="logo wave">
                <a href="/" id="logo">
                    wenhao blog
                </a>
            </div>
            <div class="nav-toggle-icon" >
                <div class="material-hamburger">
                    <span>
                    </span>
                    <span>
                    </span>
                    <span>
                    </span>
                </div>
            </div>
            <div class="menu-wrapper">
                <div class="nav-indicator">
                </div>
                <ul class="menus">
                    
                     
                        <li>
                            <a class="wave " href="/">
                                首页
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/archives">
                                归档
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/about">
                                关于
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave no-smoothstate" href="/atom.xml">
                                订阅
                            </a>
                        </li>
                     
                    
                   
                </ul>
            </div>
        </nav>
    </div>
</div>
            <div class="container content">
                <div class="scene_element scene_element--fadein">
                    <div class="row">
    <div class="main">
        <article>
          
          <header class="post-header">
          
          </header>
          <h1 class="post-title">event</h1>

          <section class="post-info">
            <span class="post-date">2017/02/06</span>
            
            
          </section>

          <section class="post-content">
            <h5 id="window"><a href="#window" class="headerlink" title="window"></a>window</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">body滚动事件: scroll</span><br><span class="line">打开页面时：只执行onload</span><br><span class="line">关闭页面时：先onbeforeunload,后onunload</span><br><span class="line">刷新页面时：先onbeforeunload,后onunload，再onload</span><br><span class="line">DOMContentLoaded事件IE9+</span><br><span class="line">onload事件触发时,所有dom,style,脚本,图片都加载完成</span><br><span class="line">DOMContentLoaded事件触发时,仅dom加载完成,不理会css,js,imo是否加载完成</span><br><span class="line">onpageshow和onpagehide事件</span><br><span class="line">往返缓存（back-forward cache = bfcache）浏览器的前进后退加快页面转换速度</span><br><span class="line">pageshow</span><br><span class="line">会在页面状态完全恢复时触发,虽然这个事件的目标是<span class="built_in">document</span>,但必须将事件处理程序添加到<span class="built_in">window</span></span><br><span class="line">pageshow</span><br><span class="line">事件的event对象包含persisted的布尔值属性,如果页面保存在bfcache中,则属性为<span class="literal">true</span>，否则为<span class="literal">false</span></span><br><span class="line">pagehide</span><br><span class="line">该事件会在浏览器卸载页面时触发,是在unload之前触发</span><br></pre></td></tr></table></figure>
<h2 id="动画事件"><a href="#动画事件" class="headerlink" title="动画事件"></a>动画事件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">webkitTransitionEnd</span><br><span class="line">onOrientationChange</span><br><span class="line">oninput onpropertychange监听输入框实时变化</span><br></pre></td></tr></table></figure>
<h2 id="事件源"><a href="#事件源" class="headerlink" title="事件源"></a>事件源</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">e.stopImmediatePropagation()  阻止当前节点和后续节点事件监听</span><br><span class="line">e.stopPropagation()  阻止冒泡FF，阻止后续节点事件监听</span><br><span class="line">e.cancelBubble = <span class="literal">true</span> 阻止冒泡IE</span><br><span class="line">e.preventDefault()  阻止默认行为</span><br><span class="line">e.returnValue=<span class="literal">false</span> 阻止默认事件</span><br><span class="line">e.currentTarget; 指向事件所绑定的元素</span><br><span class="line">e.target;  始终指向事件发生时的元素</span><br><span class="line">e.eventphase;当前事件流那个阶段,捕获<span class="number">1</span>,目标对象<span class="number">2</span>,冒泡<span class="number">3</span></span><br><span class="line">e.clientX</span><br><span class="line">e.clientY</span><br><span class="line">e.pageX</span><br><span class="line">e.pageY</span><br><span class="line">e.offsetX</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鼠标相对于事件源元素（srcElement）的X,Y坐标，只有IE事件有这2个属性，标准事件没有对应的属性</span></span><br><span class="line">e.offsetY</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鼠标相对于用户显示器屏幕左上角的X,Y坐标。标准事件和IE事件都定义了这2个属性</span></span><br><span class="line">event.screenX、event.screenY</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当第二个参数为true 事件从外往里触发 (标准浏览器默认为false 事件由里像外触发)</span></span><br><span class="line">el.addEventListener(<span class="string">'click'</span>, fn, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<h2 id="滑轮事件"><a href="#滑轮事件" class="headerlink" title="滑轮事件"></a>滑轮事件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mouosewheel 绑定事件后event对象就有e.wheelDelta值,上滚正数下滚负数</span><br><span class="line">DOMMouseScroll 同上FF</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.event.returnValue = <span class="literal">false</span> 放在表单中阻止表单提交和不执行超链接</span><br><span class="line"><span class="built_in">window</span>.print() | mail:bwh2009@qq.com</span><br></pre></td></tr></table></figure>
<h2 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mouseover</span><br><span class="line">mousemove-设置preventDefault会阻止滚动</span><br><span class="line">mousedown</span><br><span class="line">mouseup</span><br><span class="line">click</span><br><span class="line">mouseup 释放 down和up有一个被取消就不会触发click</span><br><span class="line">mousemove</span><br><span class="line">mouseover</span><br><span class="line">mouseout</span><br><span class="line">mouseenter=mouseleave 不触发子元素,不冒泡</span><br><span class="line"><span class="built_in">document</span>.onmousedown=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>)</span>&#123; 鼠标左右键</span><br><span class="line">  <span class="keyword">var</span> oEvent=ev||event</span><br><span class="line">  alert(oEvent.button)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">block</span>(<span class="params">oEvent</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">window</span>.event)&#123;</span><br><span class="line">    oEvent = <span class="built_in">window</span>.event</span><br><span class="line">    oEvent.returnValue = <span class="literal">false</span> <span class="comment">// 取消默认事件</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    oEvent.preventDefault() <span class="comment">// 取消默认事件</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">e.button 鼠标左中右<span class="number">012</span></span><br><span class="line"><span class="built_in">document</span>.oncontextmenu = block <span class="comment">// 右键菜单事件</span></span><br><span class="line">input.on (input propertychange) <span class="comment">// FF IE 值发生变化出发</span></span><br></pre></td></tr></table></figure>
<h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">el.addEventListener()</span><br><span class="line">el.removeEventListener()</span><br><span class="line">el.attachEvent()</span><br><span class="line">el.detachEvent()</span><br><span class="line">orientation change; ?</span><br></pre></td></tr></table></figure>
<h2 id="滚动事件"><a href="#滚动事件" class="headerlink" title="滚动事件"></a>滚动事件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">document.forms[0].scrollIntoView(true);元素出现在可视区域里</span><br><span class="line">el.scrollIntoViewIfNeeded(true); 尽量将元素显示在垂直方向的中部</span><br></pre></td></tr></table></figure>
<h2 id="鼠标滚轮事件"><a href="#鼠标滚轮事件" class="headerlink" title="鼠标滚轮事件"></a>鼠标滚轮事件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onmousewheel</span><br><span class="line">var scrollFunc = function(e) &#123;</span><br><span class="line">  var direct = 0</span><br><span class="line">  var e=e || window.event</span><br><span class="line">  if(e.wheelDelta)&#123;//IE/Opera/Chrome</span><br><span class="line">    document.title=e.wheelDelta</span><br><span class="line">  &#125;else if(e.detail)&#123;//Firefox</span><br><span class="line">    document.title=e.detail</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">window.onmousewheel=document.onmousewheel=scrollFunc;//IE/Opera/Chrome/Safari</span><br></pre></td></tr></table></figure>
<h2 id="获取各种属性"><a href="#获取各种属性" class="headerlink" title="获取各种属性"></a>获取各种属性</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">el.getBoundingClientRect()</span><br></pre></td></tr></table></figure>
<h2 id="移动端事件"><a href="#移动端事件" class="headerlink" title="移动端事件"></a>移动端事件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">touchstart——触屏时候发生</span><br><span class="line">touchmove——滑动时连续触发,event的preventDefault()阻止默认情况的发生：阻止页面滚动</span><br><span class="line">touchend——手指离开屏幕时触发</span><br><span class="line">touchcancel——系统停止跟踪触摸时触发,如在触摸中alert(),此时会触发该事件</span><br><span class="line"></span><br><span class="line"><span class="comment">// 属性说明</span></span><br><span class="line">touches：屏幕上所有手指的信息</span><br><span class="line">targetTouches：手指在目标区域的手指信息</span><br><span class="line">changedTouches：最近一次触发该事件的手指信息</span><br><span class="line">touchend时，touches与targetTouches信息会被删除，changedTouches保存的最后一次的信息，最好用于计算手指信息</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事件响应顺序</span></span><br><span class="line">ontouchstart  &gt; ontouchmove  &gt; ontouchend &gt; onclick</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下支持winphone 8</span></span><br><span class="line">MSPointerDown——当手指触碰屏幕时候发生。不管当前有多少只手指</span><br><span class="line">MSPointerMove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用css的html&#123;-ms-touch-action: none;&#125;可以阻止默认情况的发生：阻止页面滚动</span><br><span class="line">MSPointerUp——当手指离开屏幕时触发</span><br></pre></td></tr></table></figure>
<h5 id="移动端click事件产生200s-300s延迟响应"><a href="#移动端click事件产生200s-300s延迟响应" class="headerlink" title="移动端click事件产生200s-300s延迟响应"></a>移动端click事件产生200s-300s延迟响应</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">说明：移动设备上的web网页是有<span class="number">300</span>ms延迟的，玩玩会造成按钮点击延迟甚至是点击失效。</span><br><span class="line"><span class="number">2007</span>年苹果发布首款iphone上IOS系统搭载的safari为了将适用于PC端上大屏幕的网页能展示在手机上，使用了双击缩放的方案，</span><br><span class="line">比如你在手机上打开PC网页，页面可以撑满整个屏幕，但是字体、图片都很小看不清，此时可以快速双击屏幕上的某一部分，你就能看清该部分放大后的内容，再次双击后能回到原始状态。</span><br><span class="line">原因就出在浏览器需要如何判断快速点击上，当用户在屏幕上单击某一个元素时候，例如跳转链接&lt;a href=<span class="string">"#"</span>&gt;&lt;/a&gt;，</span><br><span class="line">此处浏览器会先捕获该次单击，但浏览器不能决定用户是单纯要点击链接还是要双击该部分区域进行缩放操作，所以，捕获第一次单击后，浏览器会先Hold一段时间t，如果在t时间区间里用户未进行下一次点击，则浏览器会做单击跳转链接的处理，如果t时间里用户进行了第二次单击操作，则浏览器会禁止跳转，转而进行对该部分区域页面的缩放操作。那么这个时间区间t有多少呢？在IOS safari下，大概为<span class="number">300</span>毫秒。这就是延迟的由来。造成的后果用户纯粹单击页面，页面需要过一段时间才响应，给用户慢体验感觉，对于web开发者来说是，页面js捕获click事件的回调函数处理，需要<span class="number">300</span>ms后才生效，也就间接导致影响其他业务逻辑的处理。</span><br><span class="line"></span><br><span class="line"><span class="comment">//解决方案：</span></span><br><span class="line">fastclick可以解决在手机上点击事件的<span class="number">300</span>ms延迟</span><br><span class="line">zepto的touch模块，tap事件也是为了解决在click的延迟问题</span><br></pre></td></tr></table></figure>
<h2 id="屏幕旋转事件"><a href="#屏幕旋转事件" class="headerlink" title="屏幕旋转事件"></a>屏幕旋转事件</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//JS处理</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">orientInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> orientChk = <span class="built_in">document</span>.documentElement.clientWidth &gt; <span class="built_in">document</span>.documentElement.clientHeight?<span class="string">'landscape'</span>:<span class="string">'portrait'</span>;</span><br><span class="line">    <span class="keyword">if</span>(orientChk ==<span class="string">'lapdscape'</span>)&#123;</span><br><span class="line">        <span class="comment">//这里是横屏下需要执行的事件</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//这里是竖屏下需要执行的事件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">orientInit()</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'onorientationchange'</span> <span class="keyword">in</span> <span class="built_in">window</span>?<span class="string">'orientationchange'</span>:<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  setTimeout(orientInit, <span class="number">100</span>)</span><br><span class="line">&#125;,<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//CSS处理</span></span><br><span class="line"><span class="comment">//竖屏时样式</span></span><br><span class="line">@media all and (orientation:portrait)&#123;&#125;</span><br><span class="line"><span class="comment">//横屏时样式</span></span><br><span class="line">@media all and (orientation:landscape)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断屏幕是否旋转</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">orientationChange</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">switch</span>(<span class="built_in">window</span>.orientation) &#123; </span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:  </span><br><span class="line">      alert(<span class="string">"肖像模式 0,screen-width: "</span> + screen.width + <span class="string">"; screen-height:"</span> + screen.height); </span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">-90</span>:  </span><br><span class="line">      alert(<span class="string">"左旋 -90,screen-width: "</span> + screen.width + <span class="string">"; screen-height:"</span> + screen.height); </span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">90</span>:    </span><br><span class="line">      alert(<span class="string">"右旋 90,screen-width: "</span> + screen.width + <span class="string">"; screen-height:"</span> + screen.height); </span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">180</span>:  </span><br><span class="line">      alert(<span class="string">"风景模式 180,screen-width: "</span> + screen.width + <span class="string">"; screen-height:"</span> + screen.height); </span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加事件监听 </span></span><br><span class="line">addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  orientationChange()</span><br><span class="line">  <span class="built_in">window</span>.onorientationchange = orientationChange</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除节点触发事件*/</span></span><br><span class="line">DOMNodeRemoved</span><br><span class="line">DOMNodeRemovedFromDocument</span><br><span class="line">DOMSubtreeModified</span><br><span class="line"></span><br><span class="line"><span class="comment">/*插入节点触发事件*/</span></span><br><span class="line">DOMSubtreeModified</span><br><span class="line">DOMNodeInserted</span><br><span class="line">DOMNodeInsertedIntoDocument</span><br></pre></td></tr></table></figure>
<h2 id="文件API"><a href="#文件API" class="headerlink" title="文件API"></a>文件API</h2><p>用于将文件读入内存，并读取文件中的数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader() <span class="comment">// 该接口总共有四个方法和六个事件：</span></span><br><span class="line">readAsBinaryString(file) <span class="comment">// 读取文件为二进制</span></span><br><span class="line">readAsDataURL(file) <span class="comment">// 读取文件DataURL</span></span><br><span class="line">readAsText(file,[encoding]) <span class="comment">// 读取文件为文本</span></span><br><span class="line">about(none) <span class="comment">// 中断文件读取</span></span><br><span class="line"></span><br><span class="line">onabort <span class="comment">// 读取文件中断时触发</span></span><br><span class="line">onerror <span class="comment">// 读取文件出错时触发</span></span><br><span class="line">onloadstart <span class="comment">// 读取文件开始时触发</span></span><br><span class="line">onprogress <span class="comment">// 读取文件中时一直触发</span></span><br><span class="line">onload <span class="comment">// 读取文件成功时触发</span></span><br><span class="line">onloadend <span class="comment">// 读取文件结束时触发（成功和失败都会触发）</span></span><br><span class="line"></span><br><span class="line">以上事件参数e有e.target.result或<span class="keyword">this</span>.result指向读取的结果</span><br></pre></td></tr></table></figure>
<h2 id="拖拽事件"><a href="#拖拽事件" class="headerlink" title="拖拽事件"></a>拖拽事件</h2><p>拖放属性：将需要拖放的元素的dragable属性设置为true（dragable=”true”）!img元素和a元素默认可以拖放<br>但是！需要注意的是：在目标元素中dragover和drop事件中要阻止默认行为（拒绝被拖放），否则拖放不能被实现！<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 拖放元素事件</span></span><br><span class="line">dragstart <span class="comment">// 拖拽前触发</span></span><br><span class="line">drag <span class="comment">// 拖拽前、拖拽结束之间，连续触发</span></span><br><span class="line">dragend <span class="comment">// 拖拽结束触发</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标元素事件</span></span><br><span class="line">dragenter <span class="comment">// 当拖拽元素进入放置区域时由放置元素触发的事件</span></span><br><span class="line">dragover <span class="comment">// 当拖拽元素进入放置区域时由放置元素频繁触发的事件(每隔几百毫秒就会触发一次)</span></span><br><span class="line">dragleave <span class="comment">// 当拖拽元素离开放置区域时由放置元素触发的事件</span></span><br><span class="line">drop <span class="comment">// 当拖拽元素在放置区域放置时由放置元素触发的事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DataTransfer对象：专门用于存放拖放时要携带的数据，可以被设置为拖放事件的dataTransfer属性</span></span><br></pre></td></tr></table></figure></p>
<p><a href="https://www.teakki.com/p/590be42c52005baa30324b0c" target="_blank" rel="noopener">https://www.teakki.com/p/590be42c52005baa30324b0c</a></p>

          </section>
        </article>
        

       
        <div class="pager">
          
            <a class="post-prev pager-item" href="/posts/3c50d03d/" >
              <strong class="article-nav-caption">上一篇</strong>
              <p class="post-nav-title">markdown</p>
            </a>
          
          
        </div>
        

         <!-- comments -->
        <div class="comment-section">
  
    


  


</div>

    </div>
    
</div>

                </div>
            </div>
        </div>
        <footer class="footer">
    <p>
        &copy; 2021 wenhao blog
    </p>
</footer>
<script src="/lib/jquery.js"></script>
<script src="/lib/waves.js"></script>
<script src="/lib/jquery-ui.js"></script>
<script src="/lib/jquery.tocify.js"></script>
<script src="/js/main.js"></script>

    </body>
</html>
